<div class="list-detail-container">
  <div class="wallpaper"></div>

  <div class="header">
    <div *ngIf="selectedList" class="info">
      <div class="top"><h3 class="name">{{ selectedList.name }}</h3><i class="bi bi-pencil-square" (click)="openSettingsPopup()"></i></div>
      <p class="description">{{ selectedList.description }}</p>
    </div>
    <div #select class="layout-select closed">
      <div class="select-btn" (click)="selectActive()">
        <span #title class="placeholder-text">Kanban Layout</span>
        <i #icon class="icon icon-arrow-down"></i>
      </div>
      <ul class="option-list">
        <li #option #table id="table" class="option closed" (click)="selectLayout(tableOption)"><span class="left"><i class="icon icon-list"></i>Table Layout</span><i class="icon icon-check"></i></li>
        <li #option #kanban id="kanban" class="option closed checked" (click)="selectLayout(kanbanOption)"><span class="left"><i class="icon icon-chart"></i>Kanban Layout</span><i class="icon icon-check"></i></li>
      </ul>
    </div>
  </div>

  <div class="layout">
    <app-list-detail-table id="table-layout" *ngIf="layouts.get('TABLE LAYOUT')" (openCreateTaskPopup)="openCreateTaskPopup($event)" [selectedList]="selectedList" [tasks]="tasks" [states]="states" [labels]="labels"></app-list-detail-table>
    <app-list-detail-kanban id="kanban-layout" *ngIf="layouts.get('KANBAN LAYOUT')" (taskDragged)="selectTask($event)" (stateChanged)="changeTaksState($event, false)" (openCreateTaskPopup)="openCreateTaskPopup($event)" (openTaskDetailPopup)="openTaskDetailPopup($event)" [selectedList]="selectedList" [tasks]="tasks" [states]="states" [labels]="labels"></app-list-detail-kanban>
  </div>
</div>

<div class="overlay" *ngIf="showCreateTaskPopup || showTaskDetailPopup || showSettingsPopup" (click)="closePopup()"></div>
<div class="popup" *ngIf="showCreateTaskPopup || showTaskDetailPopup || showSettingsPopup">
  <app-create-task *ngIf="showCreateTaskPopup" (taskCreated)="reload()" (close)="closePopup()" [boardId]="boardId" [taskListId]="taskListId" [states]="states" [labels]="labels" [selectedState]="selectedState"></app-create-task>
  <app-task-detail *ngIf="showTaskDetailPopup" (close)="closePopup()" (stateChanged)="changeTaksState($event, true)" (editTask)="editTask($event)" (deleteTask)="deleteTask($event)" [boardId]="boardId" [taskListId]="taskListId" [task]="selectedTask" [states]="states"></app-task-detail>
  <app-list-settings *ngIf="showSettingsPopup" (deleteList)="deleteTaskList()" (listEdited)="editTaskList($event)" (close)="closePopup()" [list]="selectedList"></app-list-settings>
</div>